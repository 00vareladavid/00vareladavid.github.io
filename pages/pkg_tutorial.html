<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&family=Fira+Code&family=Jost:wght@300&family=Open+Sans:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css"/>
    <style type="text/css">
        .cinzel { font-family: 'Cinzel', serif; }
        .fira-code { font-family: 'Fira Code', monospace; }
        .jost { font-family: 'Jost', sans-serif; }
        .open-sans { font-family: 'Open Sans', sans-serif; }
        .bg-half { background: repeating-linear-gradient(transparent, transparent 29.9%, #FBF1A9 30.1%, #FBF1A9 100%); }
        .element::-webkit-scrollbar { width: 0 !important }
        .element { overflow: -moz-scrollbars-none; }
        .element { -ms-overflow-style: none; }
    </style>
    <title>David E Varela</title>  
</head>
<body class="bg-white black-80">
    <div class="center">
<div class="fixed-ns fl vh-100-ns min-vh-100-ns w-100 w-20-ns content-center bg-white overflow-y-auto-ns">
    <div class="cinzel pa1 pa3-ns mv3-ns flex justify-center">
        <a class="link underline-hover f4 navy fw5 ttu" href="/">David E Varela</a></li>
    </div>
    <div class="pa1 ph3-ns">
        <ul class="list pl0">
<li class="lh-solid mv2 pt1">
    <a class="link underline-hover f4 jost dark-gray ttc " href="#the_pkg_repl_interface">
        The Pkg REPL Interface
    </a>
</li>
<li class="lh-solid mv2 pt1">
    <a class="link underline-hover f4 jost dark-gray ttc " href="#installing_and_loading_a_package">
        Installing and Loading a Package
    </a>
</li>
<li class="lh-solid mv2 pt1">
    <a class="link underline-hover f4 jost dark-gray ttc " href="#basic_commands">
        Basic commands
    </a>
</li>
<li class="lh-solid mv2 pt1">
    <a class="link underline-hover f4 jost dark-gray ttc " href="#projects">
        Projects
    </a>
</li>
<li class="lh-solid mv2 pt1">
    <a class="link underline-hover f4 jost dark-gray ttc " href="#project_files">
        Project Files
    </a>
</li>
<li class="lh-solid mv2 pt1">
    <a class="link underline-hover f4 jost dark-gray ttc " href="#switching_projects">
        Switching Projects
    </a>
</li>
<li class="lh-solid mv2 pt1">
    <a class="link underline-hover f4 jost dark-gray ttc " href="#packages">
        Packages
    </a>
</li>
<li class="lh-solid mv2 pt1">
    <a class="link underline-hover f4 jost dark-gray ttc " href="#creating_a_new_package">
        Creating a new package
    </a>
</li>
<li class="lh-solid mv2 pt1">
    <a class="link underline-hover f4 jost dark-gray ttc " href="#pkg_help_and_further_reading">
        Pkg Help and Further Reading
    </a>
</li>
        </ul>
    </div>
</div>
<div class="fr w-100 w-80-ns">
    <div class="f4 measure-wide open-sans center ph1-ns pt3-ns pa1">
<h1 class="f1 db lh-title jost ttc normal">
    An Introduction to Pkg
    <span class="f5 db jost gray ttc normal mt2">Published 2021/04/07</span>
</h1>
<p>Julia ships with a package manager: Pkg.
It installs and organizes packages.</p>
<p>The goal of this tutorial is to cover basics concepts needed to use Pkg effectively.</p>
<h1 class="f2 lh-title jost ttc normal" id="the_pkg_repl_interface"><a class="link black underline-hover" href="#the_pkg_repl_interface">The Pkg REPL Interface</a></h1>
<p>There are two ways to use Pkg: a <strong class="normal dark-gray bg-half">REPL interface</strong> and a standard <strong class="normal dark-gray bg-half">API</strong>.
To use the REPL interface, enter the right square bracket <code class="fira-code">]</code> in the Julia REPL.
You should see the Pkg prompt <code class="fira-code">pkg&gt;</code> replace the Julia prompt <code class="fira-code">julia&gt;</code>.</p>
<p>Start the Julia REPL and switch to the Pkg REPL:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">[david@blue ~] $ julia
julia&gt; 1 + 1
2

(@v1.6) pkg&gt;
</code></pre>
<h1 class="f2 lh-title jost ttc normal" id="installing_and_loading_a_package"><a class="link black underline-hover" href="#installing_and_loading_a_package">Installing and Loading a Package</a></h1>
<p>You can see available packages with <strong class="normal dark-gray bg-half"><code class="fira-code">status</code></strong>:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(@v1.6) pkg&gt; status
      Status `~/.julia/environments/v1.6/Project.toml` (empty project)
</code></pre>
<p>You should see similar feedback on a fresh system.
<code class="fira-code">empty project</code> means no packages are available for use.</p>
<p>To install a package, use <strong class="normal dark-gray bg-half"><code class="fira-code">add</code></strong>.
Install the <code class="fira-code">JSON</code> package:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(@v1.6) pkg&gt; add JSON
</code></pre>
<p>You should see feedback as Pkg installs the package.
Use <code class="fira-code">status</code> to confirm the operation was successful:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(@v1.6) pkg&gt; status
      Status `~/.julia/environments/v1.6/Project.toml`
  [682c06a0] JSON v0.21.1
</code></pre>
<p>The feedback shows <code class="fira-code">JSON</code> is available.
To use the package, return to the Julia REPL by pressing the <code class="fira-code">BACKSPACE</code> key.
You can now load <code class="fira-code">JSON</code> with <strong class="normal dark-gray bg-half"><code class="fira-code">import</code></strong> and begin using it:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">julia&gt; import JSON

julia&gt; JSON.parse(&quot;&quot;&quot;{&quot;a_number&quot; : 5.0, &quot;an_array&quot; : [&quot;foo&quot;, 9]}&quot;&quot;&quot;)
Dict{String, Any} with 2 entries:
  &quot;an_array&quot; =&gt; Any[&quot;foo&quot;, 9]
  &quot;a_number&quot; =&gt; 5.0
</code></pre>
<p>If you need to use a package:</p>
<ol>
<li><code class="fira-code">add</code> will make a package available</li>
<li><code class="fira-code">import</code> will load the package in your current session</li>
</ol>
<h1 class="f2 lh-title jost ttc normal" id="basic_commands"><a class="link black underline-hover" href="#basic_commands">Basic commands</a></h1>
<p>Let's try a few more commands.
Recall our example project already declares <code class="fira-code">JSON</code> as a dependency.</p>
<p>You can print the set of declared dependencies with <code class="fira-code">status</code>:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(@v1.6) pkg&gt; status
      Status `~/.julia/environments/v1.6/Project.toml`
  [682c06a0] JSON v0.21.1
</code></pre>
<p>To declare more dependencies use <code class="fira-code">add</code> again:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(@v1.6) pkg&gt; add DataStructures
</code></pre>
<p>Both <code class="fira-code">JSON</code> and <code class="fira-code">DataStructures</code> are now declared as dependencies:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(@v1.6) pkg&gt; status
      Status `~/.julia/environments/v1.6/Project.toml`
  [864edb3b] DataStructures v0.18.9
  [682c06a0] JSON v0.21.1
</code></pre>
<p>To remove a declaration, use <strong class="normal dark-gray bg-half"><code class="fira-code">rm</code></strong>:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(@v1.6) pkg&gt; rm JSON
</code></pre>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(@v1.6) pkg&gt; status
      Status `~/.julia/environments/v1.6/Project.toml`
  [864edb3b] DataStructures v0.18.9
</code></pre>
<p><code class="fira-code">rm</code> will <em>not</em> uninstall a package from your system.
Instead, it will update the declarations to reflect that you no longer require that package.
Because of this property, Pkg commands tend to be fast: they usually only manipulate the declarations.</p>
<p>You now know how to add, remove, and print dependency declarations.</p>
<h1 class="f2 lh-title jost ttc normal" id="projects"><a class="link black underline-hover" href="#projects">Projects</a></h1>
<p>So far, I've referred to a <em>set of dependency declarations</em> in the abstract sense.
Pkg organizes sets of dependency declarations into organizational units called <strong class="normal dark-gray bg-half">projects</strong>.</p>
<p>Traditional package managers organize everything into the conceptual equivalent
of a single project.
While this approach is initially simpler, it invariably leads to the dreaded
<a href="https://en.wikipedia.org/wiki/Dependency_hell" class="link underline-hover blue">dependency hell</a>.
Pkg <code class="fira-code">projects</code> provide a way to handle such issues while also enabling
powerful features such as reproducible projects.</p>
<h1 class="f2 lh-title jost ttc normal" id="project_files"><a class="link black underline-hover" href="#project_files">Project Files</a></h1>
<p>Projects are encoded in your file system as a directory containing a <strong class="normal dark-gray bg-half">project file</strong>.
A project file is a <a href="https://github.com/toml-lang/toml/blob/master/README.md" class="link underline-hover blue">TOML formatted</a> file
that will either have the name <code class="fira-code">Project.toml</code> or <code class="fira-code">JuliaProject.toml</code>.</p>
<p>Let's look at the current project file:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">[deps]
DataStructures = &quot;864edb3b-99cc-5e75-8d2d-829cb0a9cfe8&quot;
</code></pre>
<p>The <code class="fira-code">deps</code> table lists all the direct dependencies for a project.
It is a map from the name of a dependency to a UUID.
The name corresponds to the name you will use to load and access the dependency
from within a Julia session.
The UUID is used within Pkg and the code loading mechanism to reference dependencies.</p>
<h1 class="f2 lh-title jost ttc normal" id="switching_projects"><a class="link black underline-hover" href="#switching_projects">Switching Projects</a></h1>
<p>Pkg commands always target the <strong class="normal dark-gray bg-half">active project</strong>.
You can set the active project by directing <strong class="normal dark-gray bg-half"><code class="fira-code">activate</code></strong> to a filesystem directory:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(jl_o9x6aA) pkg&gt; activate ./Foo
  Activating new environment at `~/Foo/Project.toml`

(Foo) pkg&gt; status
      Status `~/Foo/Project.toml` (empty project)
</code></pre>
<p>The feedback tells you that this new project will be stored at the directory <code class="fira-code">~/Foo</code>.
The Pkg REPL prompt will update to reflect the active project.
We can also tell that we are targeting a new project because status tells us
that the project is empty.</p>
<p>Pkg also supports temporary projects.
They are useful when you want to create a project on the fly.
You can create a temporary project with the <code class="fira-code">--temp</code> flag:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(Foo) pkg&gt; activate --temp
  Activating new environment at `/tmp/jl_o9x6aA/Project.toml`

(jl_o9x6aA) pkg&gt; 
</code></pre>
<p>Remember, thanks to intelligent caching, projects are extremely cheap to create.
Use new projects as often as necessary.</p>
<h1 class="f2 lh-title jost ttc normal" id="packages"><a class="link black underline-hover" href="#packages">Packages</a></h1>
<p>At some point, you will want to make your code available to others.
You can do this by creating a Pkg <strong class="normal dark-gray bg-half">package</strong>.
Recall that a project is the set of requirements needed for a piece of code to run.
Then, a package is really just a specific kind of project.
In addition to a normal project, a package also requires:</p>
<ol>
<li>a root module</li>
<li>a name</li>
<li>a uuid</li>
</ol>
<p>Pkg requires the name of the package and the name of the root module to be the same.
Additionally, it requires the root module to be stored at <code class="fira-code">src/&lt;PACKAGE_NAME&gt;.jl</code>
relative to the package's root directory.</p>
<h1 class="f2 lh-title jost ttc normal" id="creating_a_new_package"><a class="link black underline-hover" href="#creating_a_new_package">Creating a new package</a></h1>
<p>Let's walk through creating a new package.
There exist a variety of packages to help with this, but I like using <code class="fira-code">PkgSkeleton</code>.</p>
<p>First, create a temporary project so that we can install <code class="fira-code">PkgSkeleton</code>:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(@v1.6) pkg&gt; activate --temp
  Activating new environment at `/tmp/jl_XgtyFv/Project.toml`
</code></pre>
<p>Next, install and load <code class="fira-code">PkgSkeleton</code>:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(jl_XgtyFv) pkg&gt; add PkgSkeleton
&lt;feedback omitted&gt;

julia&gt; import PkgSkeleton
</code></pre>
<p>Use <code class="fira-code">generate</code> to create the package:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">julia&gt; PkgSkeleton.generate(&quot;ExamplePackage&quot;)
&lt;feedback omitted&gt;
</code></pre>
<p><code class="fira-code">PkgSkeleton</code> will create a directory where the package is stored.
You will see that all the basic requirements for a package are satisfied:</p>
<ul>
<li>a project file in the root of the directory</li>
<li>the project file specifies a name, a UUID, and a <code class="fira-code">deps</code> table</li>
<li>a root module stored at <code class="fira-code">src/ExamplePackage.jl</code></li>
</ul>
<p>Notice the root module is initially empty.
Let's modify it so that our new package has some functionality:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">module ExamplePackage

hello() = println(&quot;Hello World!&quot;)

end # module
</code></pre>
<p>Finally, load and use the package:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(jl_XgtyFv) pkg&gt; activate ./ExamplePackage/
  Activating project at `~/ExamplePackage`

julia&gt; import ExamplePackage
[ Info: Precompiling ExamplePackage [708cade6-8b63-4e43-a962-7a27faa63a21]

julia&gt; ExamplePackage.hello()
Hello World!
</code></pre>
<h1 class="f2 lh-title jost ttc normal" id="pkg_help_and_further_reading"><a class="link black underline-hover" href="#pkg_help_and_further_reading">Pkg Help and Further Reading</a></h1>
<p>The Pkg REPL also ships with a built-in help system.</p>
<p>Try asking it about the <code class="fira-code">add</code> command:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(@v1.6) pkg&gt; ? add
</code></pre>
<p>Or ask for a synopsis of all commands:</p>
<pre class="pre overflow-auto br2 pa2 bg-near-white"><code class="f5 fira-code">(@v1.6) pkg&gt; ?
</code></pre>
<p>You can also check out the <a href="https://pkgdocs.julialang.org/v1.6/" class="link underline-hover blue">Pkg reference documentation</a>
for more details.
If you get stuck you can usually find someone to help you on
<a href="https://discourse.julialang.org/" class="link underline-hover blue">Julia's Discourse</a>
or on StackOverflow using the <code class="fira-code">julia</code> tag.
Happy packaging!</p>
<p class="f6 black" xmlns:cc="http://creativecommons.org/ns#">
    This work by
        <a class="link blue underline-hover" rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://varela.tech">
            David Varela
        </a>
    is licensed under
        <a class="link blue underline-hover" href="http://creativecommons.org/licenses/by-nc/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">
            CC BY-NC 4.0
        </a>
</p>
<div class="mt2 bt b--black-10 pa4 black-60 flex justify-center">
  <div class="flex-column">
    <div>
      <a class="link dim gray dib h2 w2 br-100 mr3 " href="https://twitter.com/00vareladavid" title="twitter">
        <svg data-icon="twitter" viewBox="0 0 32 32" style="fill:currentcolor">
          <title>twitter</title>
          <path d="M2 4 C6 8 10 12 15 11 A6 6 0 0 1 22 4 A6 6 0 0 1 26 6 A8 8 0 0 0 31 4 A8 8 0 0 1 28 8 A8 8 0 0 0 32 7 A8 8 0 0 1 28 11 A18 18 0 0 1 10 30 A18 18 0 0 1 0 27 A12 12 0 0 0 8 24 A8 8 0 0 1 3 20 A8 8 0 0 0 6 19.5 A8 8 0 0 1 0 12 A8 8 0 0 0 3 13 A8 8 0 0 1 2 4"></path>
        </svg>
      </a>
      <a class="link dim gray dib br-100 h2 w2 mr3 " href="https://github.com/00vareladavid" title="github">
        <svg data-icon="github" viewBox="0 0 32 32" style="fill:currentcolor">
          <title>github</title>
          <path d="M0 18 C0 12 3 10 3 9 C2.5 7 2.5 4 3 3 C6 3 9 5 10 6 C12 5 14 5 16 5 C18 5 20 5 22 6 C23 5 26 3 29 3 C29.5 4 29.5 7 29 9 C29 10 32 12 32 18 C32 25 30 30 16 30 C2 30 0 25 0 18 M3 20 C3 24 4 28 16 28 C28 28 29 24 29 20 C29 16 28 14 16 14 C4 14 3 16 3 20 M8 21 A1.5 2.5 0 0 0 13 21 A1.5 2.5 0 0 0 8 21 M24 21 A1.5 2.5 0 0 0 19 21 A1.5 2.5 0 0 0 24 21 z"></path>
        </svg>
      </a>
      <a class="link dim gray dib br-100 h2 w2 mr3 " href="https://stackoverflow.com/users/7077117" title="stackoverflow">
        <svg data-icon="stackoverflow" width="32" height="32" viewBox="0 0 384 512" style="fill:currentcolor" xmlns="http://www.w3.org/2000/svg">
          <title>stackoverflow</title>
          <!-- Font Awesome Free 5.15.3 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) -->
          <path d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/>
        </svg>
      </a>
      <a class="link dim gray dib br-100 h2 w2 mr3 " href="https://news.ycombinator.com/user?id=00vareladavid" title="hackernews">
        <svg data-icon="hackernews" width="32" height="32" viewBox="0 0 448 512" style="fill:currentcolor" xmlns="http://www.w3.org/2000/svg">
          <title>hackernews</title>
          <!-- Font Awesome Free 5.15.3 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) -->
          <path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM21.2 229.2H21c.1-.1.2-.3.3-.4 0 .1 0 .3-.1.4zm218 53.9V384h-31.4V281.3L128 128h37.3c52.5 98.3 49.2 101.2 59.3 125.6 12.3-27 5.8-24.4 60.6-125.6H320l-80.8 155.1z"/>
        </svg>
      </a>
    </div>
    <div class="f5 copyright mt3">
      &copy; 2021 David E Varela
    </div>
  </div>
</div>
    </div>
</div>
    </div> <!-- end CONTENT div -->
</body>
</html>
